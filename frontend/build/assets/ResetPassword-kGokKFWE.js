import{t as b,r as s,j as e,as as P,m as i,at as u,E as C,n as S,B as E,q as c,s as R}from"./index-DdiXzYE2.js";import{C as m,c as h,a as L,b as U,d as k}from"./card-CVxPj8sa.js";import{C as q}from"./circle-check-big-CffQpfHP.js";function I(){const p=b(),[r,x]=s.useState(""),[n,f]=s.useState(""),[o,w]=s.useState(!1),[d,l]=s.useState(!1),[j,y]=s.useState(!1),[g,N]=s.useState(!1);s.useEffect(()=>{new URLSearchParams(window.location.hash.substring(1)).get("type")==="recovery"&&N(!0)},[]);const v=async a=>{if(a.preventDefault(),r.length<6){c.error("Password must be at least 6 characters");return}if(r!==n){c.error("Passwords do not match");return}l(!0);try{const{error:t}=await R.auth.updateUser({password:r});if(t)throw t;y(!0),c.success("Password updated successfully"),setTimeout(()=>{p("/")},2e3)}catch(t){console.error("Password update failed:",t),c.error(t.message||"Failed to update password")}finally{l(!1)}};return j?e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center px-4",children:e.jsx(m,{className:"w-full max-w-md",children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsx(q,{className:"h-16 w-16 text-green-500"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Password Updated"}),e.jsx("p",{className:"text-muted-foreground",children:"Your password has been successfully updated. Redirecting you to the home page..."})]})})})}):e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center px-4",children:e.jsxs(m,{className:"w-full max-w-md",children:[e.jsxs(L,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(P,{className:"h-6 w-6 text-primary"})}),e.jsx(U,{children:"Reset Your Password"}),e.jsx(k,{children:g?"Enter your new password below.":"Enter a new password for your account."})]}),e.jsx(h,{children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{id:"password",type:o?"text":"password",placeholder:"••••••••",value:r,onChange:a=>x(a.target.value),className:"pr-10",required:!0,minLength:6}),e.jsx("button",{type:"button",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>w(!o),children:o?e.jsx(C,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"confirm-password",children:"Confirm New Password"}),e.jsx(u,{id:"confirm-password",type:o?"text":"password",placeholder:"••••••••",value:n,onChange:a=>f(a.target.value),required:!0,minLength:6})]}),e.jsx(E,{type:"submit",className:"w-full",disabled:d,children:d?"Updating...":"Update Password"})]})})]})})}export{I as default};
