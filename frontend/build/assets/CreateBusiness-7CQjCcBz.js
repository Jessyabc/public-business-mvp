import{u as A,ap as I,t as T,w as E,r as g,j as e,b3 as z,B as b,g as D,m as t,I as l,o as M,a9 as R,s as V}from"./index-0gfsL0uy.js";import{C as v,c as f,a as P,b as U}from"./card-DFvCEgtH.js";import{S as c,a as o,b as d,c as m,d as p}from"./select-VgW6waeO.js";import{u as Y}from"./useBusinessProfile-B2jwDVgR.js";import{A as H}from"./award-6S1TbqNq.js";import"./index-C5PDtfbs.js";import"./chevron-down-C2_7QqD8.js";function J(){const{user:u}=A(),{toast:h}=I(),x=T(),{industries:N,departments:w}=Y(),{isAdmin:C}=E(),_=C(),[j,y]=g.useState(!1),[i,S]=g.useState({company_name:"",industry_id:"",department_id:"",company_size:"",phone:"",website:"",bio:""}),B=["1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1000+ employees"];if(!_)return e.jsx("div",{className:"container mx-auto p-6 max-w-2xl",children:e.jsx(v,{children:e.jsxs(f,{className:"p-6 text-center",children:[e.jsx(z,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"This page is only accessible to administrators. Business membership is now invite-only."}),e.jsx(b,{onClick:()=>x("/"),children:"Return Home"})]})})});const F=async s=>{if(s.preventDefault(),!!u){y(!0);try{const{error:a}=await V.from("business_profiles").insert({user_id:u.id,...i,status:"approved"});if(a)throw a;h({title:"Business Created Successfully!",description:"You are now a Business Member with admin privileges."}),x("/business-settings")}catch(a){console.error("Error creating business:",a);let n="Failed to create business";(a instanceof Error||a&&typeof a=="object"&&"message"in a&&typeof a.message=="string")&&(n=a.message),h({title:"Error",description:n,variant:"destructive"})}finally{y(!1)}}},r=(s,a)=>{S(n=>({...n,[s]:a}))};return e.jsx("div",{className:"container mx-auto p-6 max-w-2xl",children:e.jsxs(v,{children:[e.jsxs(P,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"h-12 w-12 text-primary"}),e.jsx(H,{className:"h-6 w-6 text-yellow-500 absolute -top-2 -right-2"})]})}),e.jsx(U,{className:"text-2xl",children:"Create Your Business"}),e.jsx("p",{className:"text-muted-foreground",children:"Set up your business profile and become a Business Member with admin privileges"})]}),e.jsx(f,{children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"company_name",children:"Company Name *"}),e.jsx(l,{id:"company_name",value:i.company_name,onChange:s=>r("company_name",s.target.value),placeholder:"e.g., XYZ Inc.",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"industry",children:"Industry"}),e.jsxs(c,{value:i.industry_id,onValueChange:s=>r("industry_id",s),children:[e.jsx(o,{children:e.jsx(d,{placeholder:"Select industry"})}),e.jsx(m,{children:N.map(s=>e.jsx(p,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"department",children:"Department"}),e.jsxs(c,{value:i.department_id,onValueChange:s=>r("department_id",s),children:[e.jsx(o,{children:e.jsx(d,{placeholder:"Select department"})}),e.jsx(m,{children:w.map(s=>e.jsx(p,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"company_size",children:"Company Size"}),e.jsxs(c,{value:i.company_size,onValueChange:s=>r("company_size",s),children:[e.jsx(o,{children:e.jsx(d,{placeholder:"Select company size"})}),e.jsx(m,{children:B.map(s=>e.jsx(p,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"phone",children:"Phone"}),e.jsx(l,{id:"phone",type:"tel",value:i.phone,onChange:s=>r("phone",s.target.value),placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"website",children:"Website"}),e.jsx(l,{id:"website",type:"url",value:i.website,onChange:s=>r("website",s.target.value),placeholder:"https://yourcompany.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"bio",children:"Company Description"}),e.jsx(M,{id:"bio",value:i.bio,onChange:s=>r("bio",s.target.value),placeholder:"Tell us about your company...",rows:4})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Business Member Benefits"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Create and manage business profiles"}),e.jsx("li",{children:"• Invite team members to your business"}),e.jsx("li",{children:"• Post Business Insights with privacy controls"}),e.jsx("li",{children:"• Admin privileges to approve posts (as creator)"}),e.jsx("li",{children:"• Access to business-only content and features"})]})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:j||!i.company_name,children:j?"Creating Business...":"Create Business & Become Member"})]})})]})})}export{J as CreateBusiness,J as default};
