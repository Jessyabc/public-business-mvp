import{t as S,u as k,v as T,w as M,x as F,r as a,j as e,P as A,B as t,y as c,g as O,U as R,G as U,h as _,i as E,k as f,F as g,z as L,l as p,A as N,D as z,n as B,M as D,C as I}from"./index-0gfsL0uy.js";import{u as Y}from"./usePosts-DAZF7377.js";import{P as G}from"./PostReaderModal-CfamUBBs.js";import{P as H,F as q}from"./PullToRefresh-C2f9g5Sz.js";import{S as d}from"./skeleton-CZNpG6N_.js";import{C as V}from"./circle-alert-BI3w8pVs.js";import{H as $}from"./heart-B1ah-VLQ.js";import"./lightbulb-CYO_OQNk.js";import"./arrow-left-Mlk8Nz3C.js";import"./arrow-right-BC_qDo43.js";import"./PostToSparkCard-DhSXi48q.js";import"./globe-7Ydzx7cL.js";import"./chevron-down-C2_7QqD8.js";import"./loader-circle-CTU2R_i1.js";function ne(){const m=S(),{user:x}=k();T(),M();const{posts:r,loading:i,error:o,fetchUserPosts:n}=Y(),{data:u}=F(),[v,l]=a.useState(!1),[b,w]=a.useState("posts"),[y,h]=a.useState(null),[C,j]=a.useState(!1);a.useEffect(()=>{x&&n()},[x]);const P=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsx(A,{requireAuth:!0,children:e.jsx(H,{onRefresh:()=>n(),children:e.jsxs("div",{className:"min-h-screen p-6 pb-32 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your profile and view your content"})]}),e.jsxs("div",{className:`grid gap-4 mb-6 ${u?"grid-cols-1 md:grid-cols-2":"grid-cols-1 md:grid-cols-3"}`,children:[e.jsxs(t,{onClick:()=>l(!0),className:"glass-ios-triple h-16 text-left justify-start",variant:"outline",children:[e.jsx(c,{className:"h-5 w-5 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Create Post"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Share your insights"})]})]}),!u&&e.jsxs(t,{onClick:()=>m("/org/new"),className:"glass-ios-triple h-16 text-left justify-start",variant:"outline",children:[e.jsx(O,{className:"h-5 w-5 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Create Organization"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Set up your business"})]})]}),e.jsxs(t,{onClick:()=>m("/settings"),className:"glass-ios-triple h-16 text-left justify-start",variant:"outline",children:[e.jsx(R,{className:"h-5 w-5 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Profile Settings"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Edit profile & preferences"})]})]})]}),e.jsx(U,{className:"glass-ios-triple glass-corner-distort",children:e.jsxs(_,{value:b,onValueChange:w,className:"w-full",children:[e.jsxs(E,{className:"grid w-full grid-cols-2 glass-ios-triple mb-6 border-white/40 bg-white/10 backdrop-blur-xl shadow-lg shadow-primary/20",children:[e.jsxs(f,{value:"posts",className:"flex items-center gap-2 data-[state=active]:bg-primary/30 data-[state=active]:text-foreground",children:[e.jsx(g,{className:"w-4 h-4"}),"My Posts"]}),e.jsxs(f,{value:"lastSeen",className:"flex items-center gap-2 data-[state=active]:bg-primary/30 data-[state=active]:text-foreground",children:[e.jsx(L,{className:"w-4 h-4"}),"Last Seen"]})]}),e.jsxs(p,{value:"posts",className:"mt-0",children:[i&&e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsx(d,{className:"h-6 w-3/4 mb-4"}),e.jsx(d,{className:"h-4 w-full mb-2"}),e.jsx(d,{className:"h-4 w-2/3"})]},s))}),o&&!i&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"w-12 h-12 mx-auto mb-4 text-destructive"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Failed to Load Posts"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:o}),e.jsx(t,{onClick:()=>n(),variant:"outline",children:"Try Again"})]}),!i&&!o&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Posts Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't created any posts yet. Share your ideas!"}),e.jsxs(t,{onClick:()=>l(!0),children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"Create Your First Post"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," ",r.length===1?"post":"posts"]}),e.jsxs(t,{onClick:()=>l(!0),size:"sm",variant:"outline",children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"New Post"]})]}),r.map(s=>e.jsxs("div",{onClick:()=>{h(s),j(!0)},className:"p-4 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 hover:border-white/20 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:s.mode==="public"?"default":"secondary",children:s.mode}),e.jsx(N,{variant:"outline",children:s.type})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(z,{className:"w-3 h-3"}),P(s.created_at)]})]}),s.title&&e.jsx("h3",{className:"font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:s.content}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4"}),s.views_count||0]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-4 h-4"}),s.likes_count||0]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),s.comments_count||0]})]})]},s.id))]})})]}),e.jsx(p,{value:"lastSeen",className:"mt-0",children:e.jsx("div",{className:"h-[400px]",children:e.jsx(q,{mode:"brainstorm_last_seen"})})})]})})]}),e.jsx(I,{isOpen:v,onClose:()=>l(!1)}),e.jsx(G,{isOpen:C,onClose:()=>{j(!1),h(null)},post:y})]})})})}export{ne as default};
