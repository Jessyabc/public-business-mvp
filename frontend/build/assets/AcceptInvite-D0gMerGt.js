import{u as c,ap as u,t as l,r as a,j as d}from"./index-DdiXzYE2.js";import{rpcConsumeInvite as p}from"./rpc-CPiWz0sY.js";function h(){const{user:s}=c(),{toast:t}=u(),e=l(),[v,o]=a.useState(!0);return a.useEffect(()=>{(async()=>{const n=new URLSearchParams(window.location.search).get("token"),r=window.location.pathname;if(window.history.replaceState({},"",r),!n){o(!1),t({title:"No token found",description:"This invite link is invalid or incomplete.",variant:"destructive"}),e("/");return}if(!s){sessionStorage.setItem("pending_invite_token",n),t({title:"Sign in to continue",description:"We saved your invite—finish sign-in to accept it."}),e("/auth?next=/accept-invite");return}try{const{error:i}=await p(n);if(i)throw i;t({title:"Welcome!",description:"Business Member access granted."}),e("/settings")}catch(i){t({title:"Invite failed",description:i?.message??"Invalid or expired token.",variant:"destructive"}),e("/")}finally{o(!1)}})()},[s,t,e]),d.jsx("div",{className:"p-6",children:"Processing your invitation…"})}export{h as default};
