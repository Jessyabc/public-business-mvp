var Be=o=>{throw TypeError(o)};var ve=(o,s,t)=>s.has(o)||Be("Cannot "+t);var j=(o,s,t)=>(ve(o,s,"read from private field"),t?t.call(o):s.get(o)),Z=(o,s,t)=>s.has(o)?Be("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(o):s.set(o,t),ee=(o,s,t,i)=>(ve(o,s,"write to private field"),i?i.call(o,t):s.set(o,t),t),te=(o,s,t)=>(ve(o,s,"access private method"),t);import{H as Je,av as Qe,aw as Ve,ax as Ae,ay as Ge,az as Ue,aA as ze,r as g,aB as Ze,aC as et,x as Te,a0 as tt,u as He,s as ye,aD as y,j as e,aE as st,aF as at,aG as rt,aH as it,aI as nt,B as U,ap as ot,aJ as lt,aK as ct,g as be,aL as dt,a3 as ht,aM as ce,aN as de,aO as he,aP as pe,at as je,aQ as xe,aR as pt,aS as xt,aT as ie,aU as ut,w as mt,d as gt,t as wt,b as bt,aV as ft,A as ue,aW as Re,aX as ke,aY as Ie,y as Me,aa as Ce,F as yt,a8 as Oe,h as vt,i as jt,k as me,l as ge,aZ as _e,n as Ct}from"./index-DdiXzYE2.js";import{C as F,c as P,a as ne,b as oe,d as Nt}from"./card-CVxPj8sa.js";import{S as Ye,a as $e,b as Ke,c as Xe,d as re}from"./select-ZkE_QomC.js";import{u as Et}from"./useBusinessProfile-CX-pLqdA.js";import{B as Dt}from"./BusinessInvitations-BNARoEvq.js";import{u as St}from"./usePosts-Bi1tlgil.js";import{B as Bt}from"./BusinessMemberBadge-DosIlMOo.js";import{u as At}from"./useUserOrgs-BL7iXYKJ.js";import{P as Rt}from"./PostReaderModal-Btyl2ffZ.js";import{C as kt}from"./crown-Cra3txLl.js";import"./index-Bzy6S3eG.js";import"./chevron-down-DsrBl0uX.js";import"./separator-D1CoJcnG.js";import"./useBusinessInvitations-CQdbsXVr.js";import"./user-plus-B-KuX2ip.js";import"./circle-x-DN-46PJV.js";import"./circle-check-big-CffQpfHP.js";import"./lightbulb-DxkdnT7p.js";import"./arrow-left-DwcmxzYb.js";import"./arrow-right-CyP0_zRv.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var $,V,_,K,X,we,Ne,Le,Mt=(Le=class extends Qe{constructor(s,t){super();Z(this,X);Z(this,$);Z(this,V);Z(this,_);Z(this,K);ee(this,$,s),this.setOptions(t),this.bindMethods(),te(this,X,we).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const t=this.options;this.options=j(this,$).defaultMutationOptions(s),Ve(this.options,t)||j(this,$).getMutationCache().notify({type:"observerOptionsUpdated",mutation:j(this,_),observer:this}),t?.mutationKey&&this.options.mutationKey&&Ae(t.mutationKey)!==Ae(this.options.mutationKey)?this.reset():j(this,_)?.state.status==="pending"&&j(this,_).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||j(this,_)?.removeObserver(this)}onMutationUpdate(s){te(this,X,we).call(this),te(this,X,Ne).call(this,s)}getCurrentResult(){return j(this,V)}reset(){j(this,_)?.removeObserver(this),ee(this,_,void 0),te(this,X,we).call(this),te(this,X,Ne).call(this)}mutate(s,t){return ee(this,K,t),j(this,_)?.removeObserver(this),ee(this,_,j(this,$).getMutationCache().build(j(this,$),this.options)),j(this,_).addObserver(this),j(this,_).execute(s)}},$=new WeakMap,V=new WeakMap,_=new WeakMap,K=new WeakMap,X=new WeakSet,we=function(){const s=j(this,_)?.state??Ge();ee(this,V,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},Ne=function(s){Ue.batch(()=>{if(j(this,K)&&this.hasListeners()){const t=j(this,V).variables,i=j(this,V).context,a={client:j(this,$),meta:this.options.meta,mutationKey:this.options.mutationKey};if(s?.type==="success"){try{j(this,K).onSuccess?.(s.data,t,i,a)}catch(r){Promise.reject(r)}try{j(this,K).onSettled?.(s.data,null,t,i,a)}catch(r){Promise.reject(r)}}else if(s?.type==="error"){try{j(this,K).onError?.(s.error,t,i,a)}catch(r){Promise.reject(r)}try{j(this,K).onSettled?.(void 0,s.error,t,i,a)}catch(r){Promise.reject(r)}}}this.listeners.forEach(t=>{t(j(this,V))})})},Le);function Ot(o,s){const t=ze(),[i]=g.useState(()=>new Mt(t,o));g.useEffect(()=>{i.setOptions(o)},[i,o]);const a=g.useSyncExternalStore(g.useCallback(c=>i.subscribe(Ue.batchCalls(c)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),r=g.useCallback((c,x)=>{i.mutate(c,x).catch(Ze)},[i]);if(a.error&&et(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:r,mutateAsync:a.mutate}}function We(o){const{data:s}=Te(),t=o||s;return tt({queryKey:["organization",t],queryFn:async()=>{if(!t)return null;const{data:i,error:a}=await ye.from("orgs").select("*").eq("id",t).single();if(a)throw console.error("Error fetching organization:",a),a;return i},enabled:!!t})}function _t(){const o=ze(),{user:s}=He();return Ot({mutationFn:async({orgId:t,updates:i})=>{const{data:a,error:r}=await ye.from("orgs").update(i).eq("id",t).select().single();if(r)throw console.error("Error updating organization:",r),r;return a},onSuccess:t=>{o.invalidateQueries({queryKey:["organization",t.id]}),o.invalidateQueries({queryKey:["user-orgs"]}),o.invalidateQueries({queryKey:["org-analytics",t.id]})}})}var Ft=Object.defineProperty,Pt=(o,s,t)=>s in o?Ft(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,C=(o,s,t)=>Pt(o,typeof s!="symbol"?s+"":s,t);const fe={x:0,y:0,width:0,height:0,unit:"px"},se=(o,s,t)=>Math.min(Math.max(o,s),t),Lt=(...o)=>o.filter(s=>s&&typeof s=="string").join(" "),Fe=(o,s)=>o===s||o.width===s.width&&o.height===s.height&&o.x===s.x&&o.y===s.y&&o.unit===s.unit;function Ut(o,s,t,i){const a=T(o,t,i);return o.width&&(a.height=a.width/s),o.height&&(a.width=a.height*s),a.y+a.height>i&&(a.height=i-a.y,a.width=a.height*s),a.x+a.width>t&&(a.width=t-a.x,a.height=a.width/s),o.unit==="%"?Q(a,t,i):a}function zt(o,s,t){const i=T(o,s,t);return i.x=(s-i.width)/2,i.y=(t-i.height)/2,o.unit==="%"?Q(i,s,t):i}function Q(o,s,t){return o.unit==="%"?{...fe,...o,unit:"%"}:{unit:"%",x:o.x?o.x/s*100:0,y:o.y?o.y/t*100:0,width:o.width?o.width/s*100:0,height:o.height?o.height/t*100:0}}function T(o,s,t){return o.unit?o.unit==="px"?{...fe,...o,unit:"px"}:{unit:"px",x:o.x?o.x*s/100:0,y:o.y?o.y*t/100:0,width:o.width?o.width*s/100:0,height:o.height?o.height*t/100:0}:{...fe,...o,unit:"px"}}function Pe(o,s,t,i,a,r=0,c=0,x=i,l=a){const n={...o};let p=Math.min(r,i),u=Math.min(c,a),m=Math.min(x,i),d=Math.min(l,a);s&&(s>1?(p=c?c*s:p,u=p/s,m=x*s):(u=r?r/s:u,p=u*s,d=l/s)),n.y<0&&(n.height=Math.max(n.height+n.y,u),n.y=0),n.x<0&&(n.width=Math.max(n.width+n.x,p),n.x=0);const v=i-(n.x+n.width);v<0&&(n.x=Math.min(n.x,i-p),n.width+=v);const E=a-(n.y+n.height);if(E<0&&(n.y=Math.min(n.y,a-u),n.height+=E),n.width<p&&((t==="sw"||t=="nw")&&(n.x-=p-n.width),n.width=p),n.height<u&&((t==="nw"||t=="ne")&&(n.y-=u-n.height),n.height=u),n.width>m&&((t==="sw"||t=="nw")&&(n.x-=m-n.width),n.width=m),n.height>d&&((t==="nw"||t=="ne")&&(n.y-=d-n.height),n.height=d),s){const B=n.width/n.height;if(B<s){const A=Math.max(n.width/s,u);(t==="nw"||t=="ne")&&(n.y-=A-n.height),n.height=A}else if(B>s){const A=Math.max(n.height*s,p);(t==="sw"||t=="nw")&&(n.x-=A-n.width),n.width=A}}return n}function Tt(o,s,t,i){const a={...o};return s==="ArrowLeft"?i==="nw"?(a.x-=t,a.y-=t,a.width+=t,a.height+=t):i==="w"?(a.x-=t,a.width+=t):i==="sw"?(a.x-=t,a.width+=t,a.height+=t):i==="ne"?(a.y+=t,a.width-=t,a.height-=t):i==="e"?a.width-=t:i==="se"&&(a.width-=t,a.height-=t):s==="ArrowRight"&&(i==="nw"?(a.x+=t,a.y+=t,a.width-=t,a.height-=t):i==="w"?(a.x+=t,a.width-=t):i==="sw"?(a.x+=t,a.width-=t,a.height-=t):i==="ne"?(a.y-=t,a.width+=t,a.height+=t):i==="e"?a.width+=t:i==="se"&&(a.width+=t,a.height+=t)),s==="ArrowUp"?i==="nw"?(a.x-=t,a.y-=t,a.width+=t,a.height+=t):i==="n"?(a.y-=t,a.height+=t):i==="ne"?(a.y-=t,a.width+=t,a.height+=t):i==="sw"?(a.x+=t,a.width-=t,a.height-=t):i==="s"?a.height-=t:i==="se"&&(a.width-=t,a.height-=t):s==="ArrowDown"&&(i==="nw"?(a.x+=t,a.y+=t,a.width-=t,a.height-=t):i==="n"?(a.y+=t,a.height-=t):i==="ne"?(a.y+=t,a.width-=t,a.height-=t):i==="sw"?(a.x-=t,a.width+=t,a.height+=t):i==="s"?a.height+=t:i==="se"&&(a.width+=t,a.height+=t)),a}const ae={capture:!0,passive:!1};let Ht=0;const J=class L extends g.PureComponent{constructor(){super(...arguments),C(this,"docMoveBound",!1),C(this,"mouseDownOnCrop",!1),C(this,"dragStarted",!1),C(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),C(this,"componentRef",g.createRef()),C(this,"mediaRef",g.createRef()),C(this,"resizeObserver"),C(this,"initChangeCalled",!1),C(this,"instanceId",`rc-${Ht++}`),C(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),C(this,"onCropPointerDown",s=>{const{crop:t,disabled:i}=this.props,a=this.getBox();if(!t)return;const r=T(t,a.width,a.height);if(i)return;s.cancelable&&s.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const c=s.target.dataset.ord,x=!!c;let l=s.clientX,n=s.clientY,p=r.x,u=r.y;if(c){const m=s.clientX-a.x,d=s.clientY-a.y;let v=0,E=0;c==="ne"||c=="e"?(v=m-(r.x+r.width),E=d-r.y,p=r.x,u=r.y+r.height):c==="se"||c==="s"?(v=m-(r.x+r.width),E=d-(r.y+r.height),p=r.x,u=r.y):c==="sw"||c=="w"?(v=m-r.x,E=d-(r.y+r.height),p=r.x+r.width,u=r.y):(c==="nw"||c=="n")&&(v=m-r.x,E=d-r.y,p=r.x+r.width,u=r.y+r.height),l=p+a.x+v,n=u+a.y+E}this.evData={startClientX:l,startClientY:n,startCropX:p,startCropY:u,clientX:s.clientX,clientY:s.clientY,isResize:x,ord:c},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),C(this,"onComponentPointerDown",s=>{const{crop:t,disabled:i,locked:a,keepSelection:r,onChange:c}=this.props,x=this.getBox();if(i||a||r&&t)return;s.cancelable&&s.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const l=s.clientX-x.x,n=s.clientY-x.y,p={unit:"px",x:l,y:n,width:0,height:0};this.evData={startClientX:s.clientX,startClientY:s.clientY,startCropX:l,startCropY:n,clientX:s.clientX,clientY:s.clientY,isResize:!0},this.mouseDownOnCrop=!0,c(T(p,x.width,x.height),Q(p,x.width,x.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),C(this,"onDocPointerMove",s=>{const{crop:t,disabled:i,onChange:a,onDragStart:r}=this.props,c=this.getBox();if(i||!t||!this.mouseDownOnCrop)return;s.cancelable&&s.preventDefault(),this.dragStarted||(this.dragStarted=!0,r&&r(s));const{evData:x}=this;x.clientX=s.clientX,x.clientY=s.clientY;let l;x.isResize?l=this.resizeCrop():l=this.dragCrop(),Fe(t,l)||a(T(l,c.width,c.height),Q(l,c.width,c.height))}),C(this,"onComponentKeyDown",s=>{const{crop:t,disabled:i,onChange:a,onComplete:r}=this.props;if(i)return;const c=s.key;let x=!1;if(!t)return;const l=this.getBox(),n=this.makePixelCrop(l),p=(navigator.platform.match("Mac")?s.metaKey:s.ctrlKey)?L.nudgeStepLarge:s.shiftKey?L.nudgeStepMedium:L.nudgeStep;if(c==="ArrowLeft"?(n.x-=p,x=!0):c==="ArrowRight"?(n.x+=p,x=!0):c==="ArrowUp"?(n.y-=p,x=!0):c==="ArrowDown"&&(n.y+=p,x=!0),x){s.cancelable&&s.preventDefault(),n.x=se(n.x,0,l.width-n.width),n.y=se(n.y,0,l.height-n.height);const u=T(n,l.width,l.height),m=Q(n,l.width,l.height);a(u,m),r&&r(u,m)}}),C(this,"onHandlerKeyDown",(s,t)=>{const{aspect:i=0,crop:a,disabled:r,minWidth:c=0,minHeight:x=0,maxWidth:l,maxHeight:n,onChange:p,onComplete:u}=this.props,m=this.getBox();if(r||!a)return;if(s.key==="ArrowUp"||s.key==="ArrowDown"||s.key==="ArrowLeft"||s.key==="ArrowRight")s.stopPropagation(),s.preventDefault();else return;const d=(navigator.platform.match("Mac")?s.metaKey:s.ctrlKey)?L.nudgeStepLarge:s.shiftKey?L.nudgeStepMedium:L.nudgeStep,v=T(a,m.width,m.height),E=Tt(v,s.key,d,t),B=Pe(E,i,t,m.width,m.height,c,x,l,n);if(!Fe(a,B)){const A=Q(B,m.width,m.height);p(B,A),u&&u(B,A)}}),C(this,"onDocPointerDone",s=>{const{crop:t,disabled:i,onComplete:a,onDragEnd:r}=this.props,c=this.getBox();this.unbindDocMove(),!(i||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,r&&r(s),a&&a(T(t,c.width,c.height),Q(t,c.width,c.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),C(this,"onDragFocus",()=>{var s;(s=this.componentRef.current)==null||s.scrollTo(0,0)})}get document(){return document}getBox(){const s=this.mediaRef.current;if(!s)return{x:0,y:0,width:0,height:0};const{x:t,y:i,width:a,height:r}=s.getBoundingClientRect();return{x:t,y:i,width:a,height:r}}componentDidUpdate(s){const{crop:t,onComplete:i}=this.props;if(i&&!s.crop&&t){const{width:a,height:r}=this.getBox();a&&r&&i(T(t,a,r),Q(t,a,r))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,ae),this.document.addEventListener("pointerup",this.onDocPointerDone,ae),this.document.addEventListener("pointercancel",this.onDocPointerDone,ae),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,ae),this.document.removeEventListener("pointerup",this.onDocPointerDone,ae),this.document.removeEventListener("pointercancel",this.onDocPointerDone,ae),this.docMoveBound=!1)}getCropStyle(){const{crop:s}=this.props;if(s)return{top:`${s.y}${s.unit}`,left:`${s.x}${s.unit}`,width:`${s.width}${s.unit}`,height:`${s.height}${s.unit}`}}dragCrop(){const{evData:s}=this,t=this.getBox(),i=this.makePixelCrop(t),a=s.clientX-s.startClientX,r=s.clientY-s.startClientY;return i.x=se(s.startCropX+a,0,t.width-i.width),i.y=se(s.startCropY+r,0,t.height-i.height),i}getPointRegion(s,t,i,a){const{evData:r}=this,c=r.clientX-s.x,x=r.clientY-s.y;let l;a&&t?l=t==="nw"||t==="n"||t==="ne":l=x<r.startCropY;let n;return i&&t?n=t==="nw"||t==="w"||t==="sw":n=c<r.startCropX,n?l?"nw":"sw":l?"ne":"se"}resolveMinDimensions(s,t,i=0,a=0){const r=Math.min(i,s.width),c=Math.min(a,s.height);return!t||!r&&!c?[r,c]:t>1?r?[r,r/t]:[c*t,c]:c?[c*t,c]:[r,r/t]}resizeCrop(){const{evData:s}=this,{aspect:t=0,maxWidth:i,maxHeight:a}=this.props,r=this.getBox(),[c,x]=this.resolveMinDimensions(r,t,this.props.minWidth,this.props.minHeight);let l=this.makePixelCrop(r);const n=this.getPointRegion(r,s.ord,c,x),p=s.ord||n;let u=s.clientX-s.startClientX,m=s.clientY-s.startClientY;(c&&p==="nw"||p==="w"||p==="sw")&&(u=Math.min(u,-c)),(x&&p==="nw"||p==="n"||p==="ne")&&(m=Math.min(m,-x));const d={unit:"px",x:0,y:0,width:0,height:0};n==="ne"?(d.x=s.startCropX,d.width=u,t?(d.height=d.width/t,d.y=s.startCropY-d.height):(d.height=Math.abs(m),d.y=s.startCropY-d.height)):n==="se"?(d.x=s.startCropX,d.y=s.startCropY,d.width=u,t?d.height=d.width/t:d.height=m):n==="sw"?(d.x=s.startCropX+u,d.y=s.startCropY,d.width=Math.abs(u),t?d.height=d.width/t:d.height=m):n==="nw"&&(d.x=s.startCropX+u,d.width=Math.abs(u),t?(d.height=d.width/t,d.y=s.startCropY-d.height):(d.height=Math.abs(m),d.y=s.startCropY+m));const v=Pe(d,t,n,r.width,r.height,c,x,i,a);return t||L.xyOrds.indexOf(p)>-1?l=v:L.xOrds.indexOf(p)>-1?(l.x=v.x,l.width=v.width):L.yOrds.indexOf(p)>-1&&(l.y=v.y,l.height=v.height),l.x=se(l.x,0,r.width-l.width),l.y=se(l.y,0,r.height-l.height),l}renderCropSelection(){const{ariaLabels:s=L.defaultProps.ariaLabels,disabled:t,locked:i,renderSelectionAddon:a,ruleOfThirds:r,crop:c}=this.props,x=this.getCropStyle();if(c)return y.createElement("div",{style:x,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":s.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!i&&y.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},y.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),y.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),y.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),y.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":s.nwDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"nw"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":s.nDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"n"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":s.neDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"ne"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":s.eDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"e"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":s.seDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"se"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":s.sDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"s"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":s.swDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"sw"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":s.wDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"w"),role:"button"})),a&&y.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:l=>l.stopPropagation()},a(this.state)),r&&y.createElement(y.Fragment,null,y.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),y.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(s){const t={...fe,...this.props.crop||{}};return T(t,s.width,s.height)}render(){const{aspect:s,children:t,circularCrop:i,className:a,crop:r,disabled:c,locked:x,style:l,ruleOfThirds:n}=this.props,{cropIsActive:p,newCropIsBeingDrawn:u}=this.state,m=r?this.renderCropSelection():null,d=Lt("ReactCrop",a,p&&"ReactCrop--active",c&&"ReactCrop--disabled",x&&"ReactCrop--locked",u&&"ReactCrop--new-crop",r&&s&&"ReactCrop--fixed-aspect",r&&i&&"ReactCrop--circular-crop",r&&n&&"ReactCrop--rule-of-thirds",!this.dragStarted&&r&&!r.width&&!r.height&&"ReactCrop--invisible-crop",i&&"ReactCrop--no-animate");return y.createElement("div",{ref:this.componentRef,className:d,style:l},y.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),r?y.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},y.createElement("defs",null,y.createElement("mask",{id:`hole-${this.instanceId}`},y.createElement("rect",{width:"100%",height:"100%",fill:"white"}),i?y.createElement("ellipse",{cx:`${r.x+r.width/2}${r.unit}`,cy:`${r.y+r.height/2}${r.unit}`,rx:`${r.width/2}${r.unit}`,ry:`${r.height/2}${r.unit}`,fill:"black"}):y.createElement("rect",{x:`${r.x}${r.unit}`,y:`${r.y}${r.unit}`,width:`${r.width}${r.unit}`,height:`${r.height}${r.unit}`,fill:"black"}))),y.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,m)}};C(J,"xOrds",["e","w"]),C(J,"yOrds",["n","s"]),C(J,"xyOrds",["nw","ne","se","sw"]),C(J,"nudgeStep",1),C(J,"nudgeStepMedium",10),C(J,"nudgeStepLarge",100),C(J,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let Yt=J;function $t({image:o,onCropComplete:s,onCancel:t,maxWidth:i=500,maxHeight:a=500,aspectRatio:r=1}){const[c,x]=g.useState(),[l,n]=g.useState(),[p,u]=g.useState(""),m=g.useRef(null),[d,v]=g.useState(!1);g.useEffect(()=>{const b=new FileReader;b.onload=()=>{u(b.result)},b.readAsDataURL(o)},[o]);const E=g.useCallback(b=>{const{naturalWidth:M,naturalHeight:D}=b.currentTarget,k=Ut({unit:"%",width:90},r,M,D);x(zt(k,M,D))},[r]),B=g.useCallback(async(b,M)=>{const D=document.createElement("canvas"),k=D.getContext("2d");if(!k)throw new Error("No 2d context");const G=b.naturalWidth/b.width,H=b.naturalHeight/b.height,W=M.x*G,R=M.y*H,I=M.width*G,w=M.height*H;D.width=I,D.height=w,k.drawImage(b,W,R,I,w,0,0,I,w);let f=I,O=w;if(f>i||O>a){const z=Math.min(i/f,a/O);f=f*z,O=O*z;const S=document.createElement("canvas"),Y=S.getContext("2d");if(!Y)throw new Error("No 2d context");S.width=f,S.height=O,Y.drawImage(D,0,0,f,O),D.width=f,D.height=O,k.drawImage(S,0,0)}return new Promise((z,S)=>{D.toBlob(Y=>{if(!Y){S(new Error("Canvas is empty"));return}const le=new File([Y],b.name,{type:"image/png",lastModified:Date.now()});z(le)},"image/png",.95)})},[i,a]),A=async()=>{if(!(!l||!m.current)){v(!0);try{const b=await B(m.current,l);s(b)}catch(b){console.error("Error cropping image:",b)}finally{v(!1)}}};return e.jsx(st,{open:!0,onOpenChange:t,children:e.jsxs(at,{className:"max-w-2xl",children:[e.jsx(rt,{children:e.jsx(it,{children:"Crop and Resize Image"})}),e.jsxs("div",{className:"space-y-4",children:[p&&e.jsx("div",{className:"flex justify-center",children:e.jsx(Yt,{crop:c,onChange:(b,M)=>x(M),onComplete:b=>n(b),aspect:r,minWidth:50,minHeight:50,children:e.jsx("img",{ref:m,alt:"Crop me",src:p,style:{maxHeight:"70vh",maxWidth:"100%"},onLoad:E})})}),e.jsxs("p",{className:"text-sm text-[#6B635B] text-center",children:["Crop and center your image. Maximum size: ",i,"x",a,"px"]})]}),e.jsxs(nt,{children:[e.jsx(U,{variant:"outline",onClick:t,disabled:d,children:"Cancel"}),e.jsx(U,{onClick:A,disabled:!l||d,children:d?"Processing...":"Apply Crop"})]})]})})}async function Ee(o,s){if(!o&&!s)return null;try{const i=await fetch("https://opjltuyirkbbpwgkavjq.supabase.co/functions/v1/get-org-logo",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wamx0dXlpcmtiYnB3Z2thdmpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3MjEyMjcsImV4cCI6MjA2ODI5NzIyN30.LEiJvfprvGbLk7ni4SavBQJl8SYc32ugdCQUGg8DTaQ"},body:JSON.stringify({org_id:o,logo_path:s})});return i.ok?(await i.json()).url||null:(console.error("Failed to get signed URL:",i.statusText),null)}catch(t){return console.error("Error fetching signed URL:",t),null}}const Kt=xt({name:ie().min(2,"Organization name must be at least 2 characters"),description:ie().max(1e3,"Description must be less than 1000 characters").optional(),website:ie().url("Please enter a valid URL").optional().or(ut("")),industry_id:ie().optional(),company_size:ie().optional()});function Xt({orgId:o,onSuccess:s,isReadOnly:t=!1}){const{user:i}=He(),{toast:a}=ot(),{data:r,isLoading:c,refetch:x}=We(o),{mutate:l,isPending:n}=_t(),[p,u]=g.useState(!1),m=g.useRef(null),[d,v]=g.useState(null),[E,B]=g.useState(!1),[A,b]=g.useState(null),[M,D]=g.useState(null),k=lt({resolver:ct(Kt),defaultValues:{name:r?.name||"",description:r?.description||"",website:r?.website||"",industry_id:r?.industry_id||"",company_size:r?.company_size||""}});g.useEffect(()=>{r&&(k.reset({name:r.name||"",description:r.description||"",website:r.website||"",industry_id:r.industry_id||"",company_size:r.company_size||""}),r.logo_url?(v(r.logo_url),B(!1)):(v(null),B(!1)))},[r,k]),g.useEffect(()=>{(async()=>{const f=d||r?.logo_url;if(f&&r?.id)if(f.startsWith("http://")||f.startsWith("https://"))D(f);else{const O=await Ee(r.id,f);D(O)}else D(null)})()},[d,r?.logo_url,r?.id]),g.useEffect(()=>{(d||r?.logo_url)&&B(!1)},[d,r?.logo_url]);const G=w=>{const f=w.target.files?.[0];if(!(!f||!i||!r)){if(!f.type.startsWith("image/")){a({title:"Error",description:"Please upload an image file",variant:"destructive"});return}if(f.size>5*1024*1024){a({title:"Error",description:"Image must be less than 5MB",variant:"destructive"});return}b(f),m.current&&(m.current.value="")}},H=async w=>{if(b(null),!(!i||!r)){u(!0);try{const f="png",O=Date.now(),z=`${i.id}/org-${r.id}-logo-${O}.${f}`,{error:S}=await ye.storage.from("avatars").upload(z,w,{upsert:!0,contentType:"image/png"});if(S)throw console.error("Upload error details:",S),S.message?.includes("new row violates")||S.message?.includes("RLS")||S.message?.includes("policy")?new Error("Storage permission denied. Please contact support to configure storage permissions for your account."):new Error(S.message||"Failed to upload logo. Please check storage permissions.");await W(z)}catch(f){console.error("Error uploading logo:",f),a({title:"Error",description:f.message||"Failed to upload logo. Please check storage permissions.",variant:"destructive"})}finally{u(!1)}}},W=async w=>{r&&l({orgId:r.id,updates:{logo_url:w}},{onSuccess:async()=>{v(w),B(!1);const f=await Ee(r.id,w);D(f),await x(),a({title:"Success",description:"Logo uploaded successfully!"})},onError:f=>{a({title:"Error",description:f.message||"Failed to update logo",variant:"destructive"})}})},R=async w=>{if(!r)return;const f={name:w.name,description:w.description||null,website:pt(w.website),industry_id:w.industry_id||null,company_size:w.company_size||null};l({orgId:r.id,updates:f},{onSuccess:()=>{a({title:"Success",description:"Organization profile updated successfully!"}),s?.()},onError:O=>{a({title:"Error",description:O.message||"Failed to update organization",variant:"destructive"})}})},I=M||(d?.startsWith("http")?d:null)||(r?.logo_url?.startsWith("http")?r.logo_url:null);return o?c?e.jsx("div",{className:"text-center py-8 text-[#6B635B]",children:"Loading organization..."}):r?e.jsxs(e.Fragment,{children:[A&&e.jsx($t,{image:A,onCropComplete:H,onCancel:()=>b(null),maxWidth:500,maxHeight:500,aspectRatio:1}),e.jsxs(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:[e.jsxs(ne,{children:[e.jsxs(oe,{className:"text-[#3A3530] flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Organization Information"]}),e.jsx(Nt,{className:"text-[#6B635B]",children:t?"View your organization information (read-only)":"Update your organization details and company information."})]}),e.jsx(P,{children:e.jsx(dt,{...k,children:e.jsxs("form",{onSubmit:k.handleSubmit(R),className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"relative h-24 w-24 rounded-xl overflow-hidden flex items-center justify-center",style:{background:"#F5F1ED",boxShadow:"inset 2px 2px 5px rgba(166, 150, 130, 0.1), inset -2px -2px 5px rgba(255, 255, 255, 0.5)"},children:I&&!E?e.jsx("img",{src:I,alt:`${r?.name||"Organization"} logo`,className:"w-full h-full object-cover rounded-xl",onError:w=>{console.error("Failed to load logo image:",I,w),B(!0)},onLoad:()=>{console.log("Logo loaded successfully:",I),B(!1)}},I):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl font-bold rounded-xl",style:{background:"linear-gradient(135deg, #D4A574 0%, #B8865A 100%)",color:"#FFFFFF"},children:r?.name?.charAt(0).toUpperCase()||"?"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3530] mb-2",children:"Organization Logo"}),!t&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(U,{type:"button",variant:"outline",size:"sm",onClick:()=>m.current?.click(),disabled:p,className:"text-[#3A3530] border-[#D4CEC5] hover:bg-[#F5F1ED]",children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),p?"Uploading...":"Upload Logo"]}),I&&e.jsxs(U,{type:"button",variant:"outline",size:"sm",onClick:()=>{l({orgId:r.id,updates:{logo_url:null}},{onSuccess:()=>{v(null),a({title:"Success",description:"Logo removed"})}})},className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),e.jsx("p",{className:"text-xs text-[#6B635B] mt-1",children:"Recommended: Square image, at least 200x200px. Max 5MB."}),e.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:G,className:"hidden"})]})]}),e.jsx(ce,{control:k.control,name:"name",render:({field:w})=>e.jsxs(de,{children:[e.jsx(he,{className:"text-[#3A3530]",children:"Organization Name"}),e.jsx(pe,{children:e.jsx(je,{placeholder:"Enter organization name",...w,disabled:t,className:"text-[#3A3530] placeholder:text-[#6B635B]/60 bg-[#F5F1ED] border-[#D4CEC5]"})}),e.jsx(xe,{})]})}),e.jsx(ce,{control:k.control,name:"description",render:({field:w})=>e.jsxs(de,{children:[e.jsx(he,{className:"text-[#3A3530]",children:"Description"}),e.jsx(pe,{children:e.jsx(je,{as:"textarea",placeholder:"Tell us about your organization...",className:"min-h-[100px] text-[#3A3530] placeholder:text-[#6B635B]/60 bg-[#F5F1ED] border-[#D4CEC5]",...w,disabled:t})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ce,{control:k.control,name:"website",render:({field:w})=>e.jsxs(de,{children:[e.jsx(he,{className:"text-[#3A3530]",children:"Website"}),e.jsx(pe,{children:e.jsx(je,{placeholder:"https://example.com",...w,disabled:t,className:"text-[#3A3530] placeholder:text-[#6B635B]/60 bg-[#F5F1ED] border-[#D4CEC5]"})}),e.jsx(xe,{})]})}),e.jsx(ce,{control:k.control,name:"company_size",render:({field:w})=>e.jsxs(de,{children:[e.jsx(he,{className:"text-[#3A3530]",children:"Company Size"}),e.jsxs(Ye,{onValueChange:w.onChange,defaultValue:w.value,disabled:t,children:[e.jsx(pe,{children:e.jsx($e,{className:"text-[#3A3530] bg-[#F5F1ED] border-[#D4CEC5] hover:bg-[#EAE6E2]",disabled:t,children:e.jsx(Ke,{placeholder:"Select company size"})})}),e.jsxs(Xe,{className:"bg-white border-[#D4CEC5] text-[#3A3530]",children:[e.jsx(re,{value:"1-10",className:"text-[#3A3530] focus:bg-[#F5F1ED] focus:text-[#3A3530]",children:"1-10 employees"}),e.jsx(re,{value:"11-50",className:"text-[#3A3530] focus:bg-[#F5F1ED] focus:text-[#3A3530]",children:"11-50 employees"}),e.jsx(re,{value:"51-200",className:"text-[#3A3530] focus:bg-[#F5F1ED] focus:text-[#3A3530]",children:"51-200 employees"}),e.jsx(re,{value:"201-1000",className:"text-[#3A3530] focus:bg-[#F5F1ED] focus:text-[#3A3530]",children:"201-1000 employees"}),e.jsx(re,{value:"1000+",className:"text-[#3A3530] focus:bg-[#F5F1ED] focus:text-[#3A3530]",children:"1000+ employees"})]})]}),e.jsx(xe,{})]})})]}),!t&&e.jsx(U,{type:"submit",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",disabled:n,children:n?"Saving...":"Save Changes"})]})})})]})]}):e.jsx("div",{className:"text-center py-8 text-[#6B635B]",children:"No organization found."}):e.jsx(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:e.jsxs(P,{className:"p-8 text-center",children:[e.jsx(be,{className:"h-12 w-12 text-[#6B635B]/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-[#3A3530] mb-2",children:"No Organization Selected"}),e.jsx("p",{className:"text-[#6B635B]",children:"Please select an organization to manage."})]})})}function us(){const{isBusinessMember:o,isAdmin:s,canCreateBusinessPosts:t}=mt(),{profile:i}=Et(),{openComposer:a}=gt(),r=wt(),[c,x]=bt(),{data:l}=Te(),{data:n,isLoading:p}=At(),{posts:u,loading:m,fetchPosts:d}=St(),[v,E]=g.useState(null),A=c.get("org")||l||n?.[0]?.id,[b,M]=g.useState(null),D=g.useCallback(async h=>{try{const{data:N,error:q}=await ye.from("posts").select("*").eq("id",h).eq("status","active").single();if(q)throw q;return N}catch(N){return console.error("Error fetching post:",N),null}},[]);g.useEffect(()=>{const h=async N=>{const{postId:q,post:De}=N.detail;if(De)E(De);else if(q){const Se=await D(q);Se&&E(Se)}};return window.addEventListener("pb:brainstorm:show-thread",h),()=>window.removeEventListener("pb:brainstorm:show-thread",h)},[D]),g.useEffect(()=>{A?M(A):n&&n.length>0&&M(h=>h||n[0].id)},[A,n]);const k=c.get("tab")||"overview",[G,H]=g.useState(k);g.useEffect(()=>{const h=c.get("tab")||"overview";H(h)},[c]);const W=n?.find(h=>h.id===b),{data:R}=We(b),{isOwner:I}=ft(b),w=s(),f=!I&&!w,O=o()||s(),[z,S]=g.useState(null);g.useEffect(()=>{(async()=>{if(R?.logo_url&&R?.id)if(R.logo_url.startsWith("http://")||R.logo_url.startsWith("https://"))S(R.logo_url);else{const N=await Ee(R.id,R.logo_url);S(N)}else S(null)})()},[R?.logo_url,R?.id]),g.useEffect(()=>{b&&d("business")},[b,d]);const Y=u.filter(h=>h.kind==="BusinessInsight"&&h.mode==="business"&&h.org_id===b&&h.status==="active"&&h.published_at!==null).sort((h,N)=>new Date(N.created_at).getTime()-new Date(h.created_at).getTime()),le=Y.slice(0,5),qe=h=>{M(h),x(N=>{const q=new URLSearchParams(N);return q.set("org",h),q},{replace:!0})};return O?e.jsxs("div",{className:"min-h-screen",style:{background:"#EAE6E2",padding:"1.5rem"},children:[e.jsxs("div",{className:"container mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("img",{src:"/lovable-uploads/77267ade-34ff-4c2e-8797-fb16de997bd1.png",alt:"Public Business - Creating Collaboration",className:"h-10 w-auto"}),e.jsx("h1",{className:"text-3xl font-bold text-[#3A3530]",children:"Business Dashboard"}),I&&e.jsx(ue,{variant:"default",className:"bg-primary text-white border-primary/30",children:"Owner"}),w&&!I&&e.jsx(ue,{variant:"secondary",className:"bg-[#6B635B] text-white",children:"Admin"}),e.jsx(Bt,{className:"bg-[#3A3530] text-white"})]}),i&&e.jsxs("p",{className:"text-[#6B635B]",children:["Welcome back to ",i.company_name]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n&&n.length>1&&e.jsxs(Ye,{value:b||"",onValueChange:qe,children:[e.jsx($e,{className:"w-[250px] text-[#3A3530] bg-[#F5F1ED] border-[#D4CEC5] hover:bg-[#EAE6E2]",style:{background:"#F5F1ED",boxShadow:"inset 2px 2px 5px rgba(166, 150, 130, 0.1), inset -2px -2px 5px rgba(255, 255, 255, 0.5)"},children:e.jsx(Ke,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[W?.logo_url&&e.jsxs(Re,{className:"h-5 w-5 rounded",children:[e.jsx(ke,{src:W.logo_url}),e.jsx(Ie,{className:"text-xs bg-primary/10 text-primary",children:W.name.charAt(0)})]}),e.jsx("span",{className:"truncate",children:W?.name||"Select organization"})]})})}),e.jsx(Xe,{className:"bg-white border-[#D4CEC5] text-[#3A3530]",children:n.map(h=>e.jsx(re,{value:h.id,className:"text-[#3A3530] focus:bg-[#F5F1ED] focus:text-[#3A3530]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[h.logo_url&&e.jsxs(Re,{className:"h-5 w-5 rounded",children:[e.jsx(ke,{src:h.logo_url}),e.jsx(Ie,{className:"text-xs bg-primary/10 text-primary",children:h.name.charAt(0)})]}),e.jsx("span",{children:h.name}),h.role==="owner"&&e.jsx(ue,{variant:"secondary",className:"ml-2 text-xs bg-primary/10 text-primary border-primary/20",children:"Owner"})]})},h.id))})]}),t&&e.jsxs(U,{onClick:()=>a(),className:"flex items-center gap-2 text-white bg-[#3A3530] hover:bg-[#2A2520]",style:{boxShadow:"8px 8px 16px rgba(166, 150, 130, 0.3), -8px -8px 16px rgba(255, 255, 255, 0.85)"},children:[e.jsx(Me,{className:"h-4 w-4"}),"Create Business Insight"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[z?e.jsx("div",{className:"h-8 w-8 rounded-lg overflow-hidden flex-shrink-0",style:{background:"#F5F1ED",boxShadow:"inset 2px 2px 5px rgba(166, 150, 130, 0.1), inset -2px -2px 5px rgba(255, 255, 255, 0.5)"},children:e.jsx("img",{src:z,alt:`${R?.name||"Organization"} logo`,className:"w-full h-full object-cover",onError:()=>S(null)})}):R?.name?e.jsx("div",{className:"h-8 w-8 rounded-lg flex items-center justify-center flex-shrink-0 text-sm font-bold",style:{background:"linear-gradient(135deg, #D4A574 0%, #B8865A 100%)",color:"#FFFFFF"},children:R.name.charAt(0).toUpperCase()}):e.jsx(be,{className:"h-8 w-8 text-primary flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-[#6B635B]",children:"Company"}),I&&e.jsx(ue,{variant:"default",className:"bg-primary/20 text-primary border-primary/30 text-xs",children:"Owner"})]}),e.jsx("p",{className:"text-lg font-semibold text-[#3A3530]",children:R?.name||i?.company_name||"N/A"})]})]})})}),e.jsx(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#6B635B]",children:"Team Size"}),e.jsx("p",{className:"text-lg font-semibold text-[#3A3530]",children:i?.company_size||"N/A"})]})]})})}),e.jsx(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#6B635B]",children:"Insights Posted"}),e.jsx("p",{className:"text-lg font-semibold text-[#3A3530]",children:"0"})]})]})})}),e.jsx(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-8 w-8 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#6B635B]",children:"Total Views"}),e.jsx("p",{className:"text-lg font-semibold text-[#3A3530]",children:"0"})]})]})})})]}),e.jsxs(vt,{value:G,onValueChange:h=>{H(h);const N=new URLSearchParams(c);N.set("tab",h),r(`/business-dashboard?${N.toString()}`,{replace:!0})},className:"space-y-6",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4 text-[#6B635B]",style:{background:"#EAE6E2",boxShadow:"inset 4px 4px 10px rgba(166, 150, 130, 0.2), inset -4px -4px 10px rgba(255, 255, 255, 0.6)",borderRadius:"16px",padding:"4px"},children:[e.jsx(me,{value:"overview",className:"!text-[#6B635B] data-[state=active]:bg-white data-[state=active]:!text-[#3A3530] data-[state=active]:shadow-sm",style:{borderRadius:"12px",color:"#6B635B"},children:"Overview"}),e.jsx(me,{value:"insights",className:"!text-[#6B635B] data-[state=active]:bg-white data-[state=active]:!text-[#3A3530] data-[state=active]:shadow-sm",style:{borderRadius:"12px",color:"#6B635B"},children:"My Insights"}),e.jsx(me,{value:"team",className:"!text-[#6B635B] data-[state=active]:bg-white data-[state=active]:!text-[#3A3530] data-[state=active]:shadow-sm",style:{borderRadius:"12px",color:"#6B635B"},children:"Team Management"}),e.jsx(me,{value:"settings",className:"!text-[#6B635B] data-[state=active]:bg-white data-[state=active]:!text-[#3A3530] data-[state=active]:shadow-sm",style:{borderRadius:"12px",color:"#6B635B"},children:"Settings"})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:[e.jsx(ne,{children:e.jsxs(oe,{className:"flex items-center gap-2 text-[#3A3530]",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(P,{children:m?e.jsx("p",{className:"text-[#6B635B] text-center py-8",children:"Loading..."}):le.length===0?e.jsx("p",{className:"text-[#6B635B] text-center py-8",children:"No recent activity to display"}):e.jsx("div",{className:"space-y-3",children:le.map(h=>e.jsxs("div",{onClick:()=>{window.dispatchEvent(new CustomEvent("pb:brainstorm:show-thread",{detail:{postId:h.id}}))},className:"p-3 rounded-xl bg-[#EAE6E2] cursor-pointer transition-all",style:{boxShadow:"8px 8px 16px rgba(166, 150, 130, 0.3), -8px -8px 16px rgba(255, 255, 255, 0.85)"},onMouseEnter:N=>{N.currentTarget.style.boxShadow="inset 6px 6px 12px rgba(166, 150, 130, 0.4), inset -6px -6px 12px rgba(255, 255, 255, 0.6)"},onMouseLeave:N=>{N.currentTarget.style.boxShadow="8px 8px 16px rgba(166, 150, 130, 0.3), -8px -8px 16px rgba(255, 255, 255, 0.85)"},children:[h.title&&e.jsx("h4",{className:"font-semibold mb-1.5 text-[#3A3530] text-sm line-clamp-1",children:h.title}),e.jsx("p",{className:"text-[#6B635B] text-xs line-clamp-2 mb-2",children:h.content}),e.jsx("div",{className:"text-xs text-[#6B635B]/70",children:new Date(h.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]},h.id))})})]}),e.jsxs(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:[e.jsx(ne,{children:e.jsxs(oe,{className:"flex items-center gap-2 text-[#3A3530]",children:[e.jsx(_e,{className:"h-5 w-5"}),"Quick Actions"]})}),e.jsxs(P,{className:"space-y-3",children:[e.jsxs(U,{onClick:()=>a(),className:"w-full justify-start text-[#3A3530]",variant:"outline",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Create Business Insight"]}),e.jsxs(U,{className:"w-full justify-start text-[#3A3530]",variant:"outline",onClick:()=>{const h=new URLSearchParams(c);h.set("tab","settings"),H("settings"),r(`/business-dashboard?${h.toString()}`,{replace:!0})},children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Business Settings"]}),e.jsxs(U,{className:"w-full justify-start text-[#3A3530]",variant:"outline",onClick:()=>{const h=new URLSearchParams(c);h.set("tab","team"),H("team"),r(`/business-dashboard?${h.toString()}`,{replace:!0})},children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Manage Team Invitations"]})]})]})]}),e.jsxs(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:[e.jsx(ne,{children:e.jsxs(oe,{className:"flex items-center gap-2 text-[#3A3530]",children:[e.jsx(kt,{className:"h-5 w-5 text-yellow-500"}),"Business Member Benefits"]})}),e.jsx(P,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-[#3A3530]",children:[e.jsx(Ct,{className:"h-4 w-4"}),"Content Creation"]}),e.jsxs("ul",{className:"text-sm text-[#6B635B] space-y-1",children:[e.jsx("li",{children:"• Post Business Insights with privacy controls"}),e.jsx("li",{children:"• Share industry reports and whitepapers"}),e.jsx("li",{children:"• Create webinars and video content"}),e.jsx("li",{children:"• Target specific industries and departments"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-[#3A3530]",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Team Management"]}),e.jsxs("ul",{className:"text-sm text-[#6B635B] space-y-1",children:[e.jsx("li",{children:"• Invite team members to your business"}),e.jsx("li",{children:"• Manage business member roles"}),e.jsx("li",{children:"• Control content permissions"}),w&&e.jsx("li",{children:"• Admin privileges for approvals"})]})]})]})})]})]}),e.jsx(ge,{value:"insights",children:e.jsxs(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:[e.jsx(ne,{children:e.jsx(oe,{className:"text-[#3A3530]",children:"My Business Insights"})}),e.jsx(P,{children:m?e.jsx("p",{className:"text-[#6B635B] text-center py-8",children:"Loading insights..."}):Y.length===0?e.jsxs("p",{className:"text-[#6B635B] text-center py-8",children:["No business insights posted yet.",e.jsx(U,{variant:"link",onClick:()=>a(),className:"ml-1 p-0 h-auto",children:"Create your first insight"})]}):e.jsx("div",{className:"space-y-4",children:Y.map(h=>e.jsxs("div",{onClick:()=>{window.dispatchEvent(new CustomEvent("pb:brainstorm:show-thread",{detail:{postId:h.id}}))},className:"p-4 rounded-xl bg-[#EAE6E2] cursor-pointer transition-all",style:{boxShadow:"8px 8px 16px rgba(166, 150, 130, 0.3), -8px -8px 16px rgba(255, 255, 255, 0.85)"},onMouseEnter:N=>{N.currentTarget.style.boxShadow="inset 6px 6px 12px rgba(166, 150, 130, 0.4), inset -6px -6px 12px rgba(255, 255, 255, 0.6)"},onMouseLeave:N=>{N.currentTarget.style.boxShadow="8px 8px 16px rgba(166, 150, 130, 0.3), -8px -8px 16px rgba(255, 255, 255, 0.85)"},children:[h.title&&e.jsx("h3",{className:"font-semibold mb-2 text-[#3A3530]",children:h.title}),e.jsx("p",{className:"text-[#6B635B]",children:h.content}),e.jsx("div",{className:"mt-2 text-xs text-[#6B635B]",children:new Date(h.created_at).toLocaleDateString()})]},h.id))})})]})}),e.jsx(ge,{value:"team",children:e.jsx(Dt,{})}),e.jsx(ge,{value:"settings",children:p?e.jsx(F,{className:"border-0",style:{background:"#EAE6E2",boxShadow:"8px 8px 20px rgba(166, 150, 130, 0.3), -8px -8px 20px rgba(255, 255, 255, 0.85)",borderRadius:"24px"},children:e.jsx(P,{className:"p-8 text-center",children:e.jsx("div",{className:"text-[#6B635B]",children:"Loading organizations..."})})}):e.jsx(Xt,{orgId:b||void 0,isReadOnly:f,onSuccess:()=>{}},b||"no-org")})]})]}),e.jsx(Rt,{isOpen:!!v,onClose:()=>E(null),post:v})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(F,{children:e.jsxs(P,{className:"p-8 text-center",children:[e.jsx(be,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Business Access Required"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to be a Business Member to access this dashboard."}),e.jsx(U,{asChild:!0,children:e.jsx("a",{href:"/create-business",children:"Create Business"})})]})})})}export{us as BusinessDashboard,us as default};
