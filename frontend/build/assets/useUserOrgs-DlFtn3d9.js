import{u as _,a0 as g,s as m}from"./index-0gfsL0uy.js";function f(){const{user:r}=_();return g({queryKey:["user-orgs",r?.id],queryFn:async()=>{if(!r)return[];const{data:t,error:o}=await m.from("org_members").select("org_id, role, created_at").eq("user_id",r.id);if(o)return console.error("Error fetching org members:",o),[];if(!t||t.length===0)return[];const u=t.map(e=>e.org_id),{data:l,error:s}=await m.from("orgs").select("id, name, description, logo_url, website, created_at").in("id",u);if(s)return console.error("Error fetching orgs:",s),[];const i=new Map(t.map(e=>[e.org_id,e]));return(l||[]).map(e=>({id:e.id,name:e.name,description:e.description,logo_url:e.logo_url,website:e.website,role:i.get(e.id)?.role||"member",created_at:i.get(e.id)?.created_at||e.created_at})).sort((e,a)=>{const n={owner:0,business_admin:1,member:2},d=n[e.role]??3,c=n[a.role]??3;return d!==c?d-c:new Date(a.created_at).getTime()-new Date(e.created_at).getTime()})},enabled:!!r})}export{f as u};
